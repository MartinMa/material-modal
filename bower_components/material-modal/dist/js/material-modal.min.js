/*!
 * Material Modal v0.1.0
 * Copyright 2015 Mark Rabey <mark@markrabey.com> (markrabey.com)
 * Licensed under the MIT license
 */


var Modal=function(a,b){"use strict";var c={qsa:function(b){return a.querySelectorAll(b)}},d=c.qsa(".modal__trigger"),e=c.qsa(".modal"),f=c.qsa(".modal__bg"),g=c.qsa(".modal__content"),h=c.qsa(".modal__close"),i=b,j=!1,k=400,l=d.length,m=function(b){b.preventDefault();var c=this,d=c.dataset.modal,e=d.length,f=d.substring(1,e),g=a.getElementById(f);n(c,g)},n=function(c,d){var e=a.getElementById("modal__temp");if(null===e){var f=a.createElement("div");f.id="modal__temp",c.appendChild(f),f.style.backgroundColor=b.getComputedStyle(c).backgroundColor,o(c,d,f)}},o=function(a,c,d){var e,f,g,h,j=a.getBoundingClientRect(),l=c,m=l.querySelector(".modal__content").getBoundingClientRect(),n=i.innerWidth/2,o=i.innerHeight/2;a.classList.add("modal__trigger--active"),g=m.width/j.width,h=m.height/j.height,g=g.toFixed(3),h=h.toFixed(3),e=Math.round(n-j.left-j.width/2),f=Math.round(o-j.top-j.height/2),l.classList.contains("modal--align-top")&&(f=Math.round(m.height/2+m.top-j.top-j.height/2)),a.style.transform="translate("+e+"px, "+f+"px)",a.style.webkitTransform="translate("+e+"px, "+f+"px)",d.style.backgroundColor="#fff",d.style.transform="scale("+g+","+h+")",d.style.webkitTransform="scale("+g+","+h+")",b.setTimeout(function(){b.requestAnimationFrame(function(){p(l,d)})},k)},p=function(a,b){function c(){b.style.opacity="0",d.removeEventListener("transitionend",c,!1)}if(!j){var d=a.querySelector(".modal__content");a.classList.add("modal--active"),d.classList.add("modal__content--active"),d.addEventListener("transitionend",c,!1),j=!0}},q=function(c){function f(){setTimeout(function(){b.requestAnimationFrame(function(){i.remove()})},k-50)}c.preventDefault(),c.stopImmediatePropagation();var h=c.target,i=a.getElementById("modal__temp");if(j&&h.classList.contains("modal__bg")||h.classList.contains("modal__close")){i.style.opacity="1",i.removeAttribute("style");for(var m=0;l>m;m++)e[m].classList.remove("modal--active"),g[m].classList.remove("modal__content--active"),d[m].style.transform="none",d[m].style.webkitTransform="none",d[m].classList.remove("modal__trigger--active");i.addEventListener("transitionend",f,!1),j=!1}},r=function(){for(var a=0;l>a;a++)d[a].addEventListener("click",m,!1),h[a].addEventListener("click",q,!1),f[a].addEventListener("click",q,!1)},s=function(){r()};return{init:s}}(document,window);Modal.init();